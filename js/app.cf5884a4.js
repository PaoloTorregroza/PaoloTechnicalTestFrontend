(function(t){function e(e){for(var a,i,s=e[0],c=e[1],u=e[2],d=0,p=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(p.length)p.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],a=!0,s=1;s<r.length;s++){var c=r[s];0!==n[c]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=r[0]))}return t}var a={},n={app:0},o=[];function i(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=a,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(r,a,function(e){return t[e]}.bind(null,a));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/PaoloTechnicalTestFrontend/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"0127":function(t,e,r){},"034f":function(t,e,r){"use strict";r("0127")},"06d7":function(t,e,r){},"0a59":function(t,e,r){},"2f62":function(t,e,r){},"3fdc":function(t,e,r){},"406f":function(t,e,r){"use strict";r("7f10")},"541a":function(t,e,r){},"552f":function(t,e,r){"use strict";r("86d6")},"56d7":function(t,e,r){"use strict";r.r(e);r("ac3f"),r("5151"),r("b943"),r("b1fa");var a=r("d04a"),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("router-view",{staticClass:"main-view"})],1)},o=[],i=r("c047"),s=(r("833b"),r("3e92"),r("3e23")),c=r.n(s);function u(t){return l.apply(this,arguments)}function l(){return l=Object(i["a"])(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},t.prev=1,!e.$store.state.userData.id){t.next=8;break}return t.next=5,c.a.get("".concat(e.$apiUrl,"/user/").concat(e.$store.state.userData.id),r);case 5:return t.abrupt("return",t.sent);case 8:if("/"===e.$route.path){t.next=11;break}return t.next=11,e.$router.push("/");case 11:t.next=20;break;case 13:if(t.prev=13,t.t0=t["catch"](1),localStorage.clear(),e.$store.commit("logout"),"/"===e.$route.path){t.next=20;break}return t.next=20,e.$router.push("/");case 20:case"end":return t.stop()}}),t,null,[[1,13]])}))),l.apply(this,arguments)}var d={name:"App",created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u(t);case 2:if(r=e.sent,!r){e.next=11;break}if(!r.data.company){e.next=9;break}return e.next=7,t.$router.push("/projects/"+r.data.company.id);case 7:e.next=11;break;case 9:return e.next=11,t.$router.push("/companySelect");case 11:case"end":return e.stop()}}),e)})))()}},p=d,m=(r("034f"),r("bdd7")),f=Object(m["a"])(p,n,o,!1,null,null,null),h=f.exports,b=r("6c71"),v=r("7f31");a["default"].use(b["a"]);var g=new b["a"].Store({state:{logged:!1,userData:{}},mutations:{login:function(t,e){t.logged=!0,t.userData=e},logout:function(t){t.logged=!1,t.userData={}},updateUser:function(t,e){t.userData=e}},plugins:[Object(v["a"])()]}),k=r("bbcb"),y=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",{staticClass:"home-view"},[r("h1",[t._v("Fusepong Paolo's test")]),r("b-card",{attrs:{"body-class":"text-center","header-tag":"nav"},scopedSlots:t._u([{key:"header",fn:function(){return[r("b-nav",{attrs:{"card-header":"",tabs:""}},[r("b-nav-item",{attrs:{active:"login"===t.tab},on:{click:function(e){t.tab="login"}}},[t._v(" Login ")]),r("b-nav-item",{attrs:{active:"register"===t.tab},on:{click:function(e){t.tab="register"}}},[t._v(" Register ")])],1)]},proxy:!0}])},["login"===t.tab?r("div",{staticClass:"home-card-container"},[r("Login",{on:{loginUser:t.onLogin}})],1):"register"===t.tab?r("div",{staticClass:"home-card-container"},[r("Register",{on:{registerUser:t.onRegister}})],1):t._e()])],1)])},w=[],x=r("4f92"),S=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login-form"},[r("b-form",{on:{submit:t.onSubmit}},[r("b-form-group",{attrs:{id:"input-group-1",label:"Email address:","label-for":"input-1",description:"We'll never share your email with anyone else."}},[r("b-form-input",{attrs:{id:"input-1",type:"email",placeholder:"Enter email",required:""},model:{value:t.form.mail,callback:function(e){t.$set(t.form,"mail",e)},expression:"form.mail"}})],1),r("b-form-group",{attrs:{id:"input-group-2",label:"Password:","label-for":"input-2"}},[r("b-form-input",{attrs:{id:"input-2",type:"password",placeholder:"Enter password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),r("b-button",{staticStyle:{"margin-top":"17px"},attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1)},$=[],j={name:"Login",data:function(){return{form:{mail:"",password:""}}},methods:{onSubmit:function(t){t.preventDefault(),this.$emit("loginUser",this.form)}}},_=j,C=(r("5dd1"),Object(m["a"])(_,S,$,!1,null,"ed8776bc",null)),R=C.exports,O=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login-form"},[r("b-form",{on:{submit:t.onSubmit}},[r("b-form-group",{attrs:{id:"input-group-1",label:"Email address:","label-for":"input-1",description:"We'll never share your email with anyone else."}},[r("b-form-input",{attrs:{id:"input-1",type:"email",placeholder:"Enter email",required:""},model:{value:t.form.mail,callback:function(e){t.$set(t.form,"mail",e)},expression:"form.mail"}})],1),r("b-form-group",{attrs:{id:"input-group-2",label:"Your username:","label-for":"input-2",description:"Everyone will see this!"}},[r("b-form-input",{attrs:{id:"input-2",type:"text",placeholder:"Enter your username",required:""},model:{value:t.form.username,callback:function(e){t.$set(t.form,"username",e)},expression:"form.username"}})],1),r("b-form-group",{attrs:{id:"input-group-3",label:"Password:","label-for":"input-3"}},[r("b-form-input",{attrs:{id:"input-3",type:"password",placeholder:"Enter password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),r("b-form-group",{staticStyle:{"margin-top":"17px"},attrs:{id:"input-group-4",label:"Confirm password:","label-for":"input-4"}},[r("b-form-input",{attrs:{id:"input-4",type:"password",placeholder:"Confirm password",required:""},model:{value:t.form.confirmPassword,callback:function(e){t.$set(t.form,"confirmPassword",e)},expression:"form.confirmPassword"}})],1),r("b-button",{staticStyle:{"margin-top":"17px"},attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1)},U=[],I={name:"Register",data:function(){return{form:{mail:"",password:"",confirmPassword:"",username:""}}},methods:{onSubmit:function(t){t.preventDefault(),this.form.password===this.form.confirmPassword?this.$emit("registerUser",this.form):alert("Passwords do no match")}}},E=I,P=(r("f0ec"),Object(m["a"])(E,O,U,!1,null,"94a13ae8",null)),D=P.exports,A={name:"Home",data:function(){return{tab:"login"}},components:{Register:D,Login:R},methods:{onRegister:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=Object(x["a"])({},t),r.prev=1,r.next=4,c.a.post("".concat(e.$apiUrl,"/auth/register"),a);case 4:e.tab="login",r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),alert("Error: user already exists");case 10:case"end":return r.stop()}}),r,null,[[1,7]])})))()},onLogin:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=Object(x["a"])({},t),r.prev=1,r.next=4,c.a.post("".concat(e.$apiUrl,"/auth/login"),a);case 4:if(n=r.sent,localStorage.setItem("token",n.data.token),e.$store.commit("login",n.data.data),o=n.data.data,!o.company){r.next=13;break}return r.next=11,e.$router.push("/projects/"+o.company.id);case 11:r.next=15;break;case 13:return r.next=15,e.$router.push("/companySelect");case 15:r.next=20;break;case 17:r.prev=17,r.t0=r["catch"](1),alert("Wrong email or password");case 20:case"end":return r.stop()}}),r,null,[[1,17]])})))()}}},T=A,H=(r("b3d6"),Object(m["a"])(T,y,w,!1,null,"4512cb3c",null)),z=H.exports,N=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"selector-card"},[r("b-card",{staticStyle:{width:"80vw"},attrs:{"body-class":"text-center",title:"Which company do you work for? ","sub-title":"Select one company or register a new one"}},[r("div",{staticClass:"selector-container"},[r("CompanySelector",{staticStyle:{margin:"34px 0px",width:"100%"}}),r("b-card-text",[t._v("You can only select one company.")])],1)])],1)},M=[],B=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",[r("b-table",{attrs:{hover:"",fields:t.fields,items:t.items,"sticky-header":""},scopedSlots:t._u([{key:"cell(select)",fn:function(e){return[r("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(r){return t.updateUser(e.item,e.index,r.target)}}},[t._v(" Select ")])]}}])})],1),r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-center",modifiers:{"modal-center":!0}}],staticStyle:{width:"100%"},attrs:{variant:"outline-info"}},[r("b-icon",{attrs:{icon:"plus","aria-hidden":"true"}})],1),r("b-modal",{attrs:{"hide-footer":"","hide-header-close":"",id:"modal-center",centered:"",title:"Register a new company."}},[r("RegisterCompany",{on:{companyRegistered:t.loadCompanies}})],1)],1)},q=[],L=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-form",{on:{submit:t.onSubmit}},[r("b-form-group",{attrs:{id:"input-group-1",label:"Name:","label-for":"input-1"}},[r("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"Name",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("b-form-group",{attrs:{id:"input-group-2",label:"Nit:","label-for":"input-2"}},[r("b-form-input",{attrs:{id:"input-2",type:"text",placeholder:"Company unique identifier",required:""},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1),r("b-form-group",{attrs:{id:"input-group-3",label:"phone:","label-for":"input-3"}},[r("b-form-input",{attrs:{id:"input-3",type:"text",placeholder:"Company phone",required:""},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),r("b-form-group",{attrs:{id:"input-group-4",label:"Mail:","label-for":"input-4"}},[r("b-form-input",{attrs:{id:"input-4",type:"text",placeholder:"Company email",required:""},model:{value:t.form.mail,callback:function(e){t.$set(t.form,"mail",e)},expression:"form.mail"}})],1),r("div",{staticStyle:{display:"flex","margin-top":"17px"}},[r("b-button",{on:{click:function(e){return t.$bvModal.hide("modal-center")}}},[t._v("Cancel")]),r("b-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1)],1)},W=[],F={name:"RegisterCompany",data:function(){return{form:{id:"",name:"",mail:"",phone:""}}},methods:{onSubmit:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t.preventDefault(),a=e.form,n={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},r.prev=3,r.next=6,c.a.post("".concat(e.$apiUrl,"/company"),a,n);case 6:e.$emit("companyRegistered"),r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](3),alert("Error creating company");case 12:e.$bvModal.hide("modal-center");case 13:case"end":return r.stop()}}),r,null,[[3,9]])})))()}}},J=F,V=Object(m["a"])(J,L,W,!1,null,"6dcceaf8",null),Y=V.exports,G={name:"CompanySelector",components:{RegisterCompany:Y},data:function(){return{fields:["name",{key:"id",label:"Nit"},"mail","phone",{key:"select",label:"Select"}],items:[]}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadCompanies();case 2:case"end":return e.stop()}}),e)})))()},methods:{loadCompanies:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.a.get("".concat(t.$apiUrl,"/company"));case 3:r=e.sent,t.items=r.data.data,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),alert("Error getting companies, try again later.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},updateUser:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},r.prev=1,r.next=4,c.a.put("".concat(e.$apiUrl,"/user/")+e.$store.state.userData.id,{company:{id:t.id}},a);case 4:return r.next=6,e.$router.push("/projects/"+t.id);case 6:r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),alert("Error selecting company");case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()}}},K=G,Q=Object(m["a"])(K,B,q,!1,null,"36177e78",null),X=Q.exports,Z={name:"SelectCompany",components:{CompanySelector:X}},tt=Z,et=(r("9713"),Object(m["a"])(tt,N,M,!1,null,"8116b290",null)),rt=et.exports,at=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{width:"100%",display:"flex","flex-direction":"column","justify-content":"center"}},[r("h3",{staticStyle:{"text-align":"center","margin-top":"30vh"}},[t._v("Select a project.")]),r("div",{staticClass:"projects-container"},[t._l(t.projects,(function(e){return r("router-link",{key:e.id,staticStyle:{"text-decoration":"none",color:"black"},attrs:{to:"/dashboard/"+e.id}},[r("b-card",{staticClass:"mb-2 project-card-container",staticStyle:{width:"10rem","min-height":"140px",margin:"12px"}},[r("div",{staticClass:"project-card"},[r("div",{staticClass:"project-icon",style:t.iconStyle()},[t._v(" "+t._s(e.name[0])+" ")]),r("b-card-text",{staticStyle:{"text-align":"center","margin-top":"8px"}},[t._v(" "+t._s(e.name)+" ")])],1)])],1)})),r("b-card",{staticClass:"mb-2 centered-card-button project-card-container"},[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-project",modifiers:{"new-project":!0}}],staticStyle:{width:"6.6rem",height:"6.6rem"},attrs:{variant:"outline-info"}},[r("b-icon",{attrs:{icon:"plus","aria-hidden":"true"}})],1),r("b-modal",{attrs:{"hide-footer":"","hide-header-close":"",id:"new-project",centered:"",title:"Create a new project"}},[r("NewProjectDialog",{on:{createNewProject:t.createNewProject}})],1)],1)],2),r("div",{staticClass:"logout"},[r("b-icon-door-open",{staticStyle:{width:"30px",height:"30px",cursor:"pointer"},attrs:{variant:"danger"},on:{click:t.logout}}),t._v(" Logout ")],1)])},nt=[],ot=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-form",{on:{submit:t.onSubmit}},[r("b-form-group",{attrs:{id:"input-group-1",label:"Name:","label-for":"input-1"}},[r("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"Name",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("div",{staticStyle:{display:"flex","margin-top":"17px"}},[r("b-button",{on:{click:function(e){return t.$bvModal.hide("new-project")}}},[t._v("Cancel")]),r("b-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1)],1)},it=[],st=(r("4156"),{name:"NewProjectDialog",data:function(){return{form:{name:""}}},methods:{onSubmit:function(t){t.preventDefault(),this.$bvModal.hide("new-project"),this.$emit("createNewProject",this.form.name)}}}),ct=st,ut=Object(m["a"])(ct,ot,it,!1,null,"25177abc",null),lt=ut.exports,dt={name:"SelectProject",components:{NewProjectDialog:lt},data:function(){var t=this;return{projects:[],iconStyle:function(){return{backgroundColor:t.getRandomColor()}}}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadProjects();case 2:case"end":return e.stop()}}),e)})))()},methods:{getRandomColor:function(){for(var t="0123456789ABCDEF",e="#",r=0;r<6;r++)e+=t[Math.floor(16*Math.random())];return e},loadProjects:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.$route.params.companyId,a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},e.prev=2,e.next=5,c.a.get("".concat(t.$apiUrl,"/project/company/").concat(r),a);case 5:n=e.sent,t.projects=n.data.data,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),alert("Error getting projects");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()},createNewProject:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.$route.params.companyId,n={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},r.prev=2,r.next=5,c.a.post("".concat(e.$apiUrl,"/project"),{company:{id:a},name:t},n);case 5:return r.next=7,e.loadProjects();case 7:r.next=12;break;case 9:r.prev=9,r.t0=r["catch"](2),alert("Error creating project");case 12:case"end":return r.stop()}}),r,null,[[2,9]])})))()},logout:function(){localStorage.removeItem("token"),this.$store.commit("logout"),this.$router.push("/")}}},pt=dt,mt=(r("9d3b"),Object(m["a"])(pt,at,nt,!1,null,"05fd3894",null)),ft=mt.exports,ht=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"dashboard-container"},[r("HistoriesPanel",{attrs:{projectId:t.$route.params.projectId,histories:t.histories,currentSelectedId:t.currentHistoryId,users:t.users},on:{historySelected:t.historySelected,taskCreated:t.loadAll,newProperty:t.loadHistories}}),r("TasksPanel",{attrs:{tasks:t.tasks},on:{taskUpdated:t.loadAll}})],1)},bt=[],vt=(r("291a"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tasks-board dashboard-item"},[r("Column",{attrs:{title:"Active",tasks:t.tasks.filter((function(t){return"active"===t.status}))},on:{taskUpdated:t.taskUpdated}}),r("Column",{attrs:{title:"Working",tasks:t.tasks.filter((function(t){return"working"===t.status}))},on:{taskUpdated:t.taskUpdated}}),r("Column",{attrs:{title:"Done",tasks:t.tasks.filter((function(t){return"done"===t.status}))},on:{taskUpdated:t.taskUpdated}})],1)}),gt=[],kt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"column-container"},[r("p",[t._v(t._s(t.title))]),r("div",{staticClass:"column-tasks-container"},t._l(t.tasks,(function(e){return r("TaskCard",{key:e.id,attrs:{taskInfo:e},on:{taskUpdated:t.taskUpdated}})})),1)])},yt=[],wt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",{staticClass:"task-card",attrs:{"border-variant":t.getBorderVariant(),header:"Responsible: "+t.taskInfo.user.username,align:"center"}},[r("b-card-text",[t._v(t._s(t.taskInfo.description))]),r("div",{staticStyle:{display:"flex","justify-content":"center"}},[r("b-button",{staticClass:"m-md-2",attrs:{size:"sm",variant:"info"},on:{click:t.openDialog}},[t._v(" Overview ")]),r("b-dropdown",{staticClass:"m-md-2",attrs:{id:"dropdown-1",size:"sm",text:"Update Status",variant:"info"}},[r("b-dropdown-item",{on:{click:function(e){return t.selectStatus("active")}}},[t._v("Active")]),r("b-dropdown-item",{on:{click:function(e){return t.selectStatus("working")}}},[t._v("Working")]),r("b-dropdown-item",{on:{click:function(e){return t.selectStatus("done")}}},[t._v("Done")])],1)],1),r("b-modal",{attrs:{"hide-header-close":"",id:"task-card-"+t.taskInfo.id,centered:"",title:"Task Overview"}},[r("TaskOverview",{attrs:{task:t.taskInfo},on:{taskUpdated:function(e){return t.$emit("taskUpdated")}}})],1)],1)},xt=[],St=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("p",[t._v("Responsible: "+t._s(t.task.user.name))]),r("p",[t._v(t._s(t.task.description))]),r("div",{staticStyle:{display:"flex","align-items":"center"}},[r("p",{staticStyle:{"margin-bottom":"0"}},[t._v("Status: "+t._s(t.task.status))]),r("b-dropdown",{staticClass:"m-md-2",attrs:{id:"dropdown-1",size:"sm",text:"Update Status",variant:"info"}},[r("b-dropdown-item",{on:{click:function(e){return t.selectStatus("active")}}},[t._v("Active")]),r("b-dropdown-item",{on:{click:function(e){return t.selectStatus("working")}}},[t._v("Working")]),r("b-dropdown-item",{on:{click:function(e){return t.selectStatus("done")}}},[t._v("Done")])],1)],1),r("div",{staticStyle:{"margin-bottom":"20px"}},[r("b-button",{staticStyle:{"margin-right":"8px"},attrs:{variant:"info",size:"sm"},on:{click:t.openDialog}},[t._v(" Edit ")]),"active"===t.task.status?r("b-button",{attrs:{size:"sm",variant:"danger"},on:{click:t.deleteTask}},[t._v(" Cancel Task ")]):t._e()],1),r("div",{staticClass:"task-comments-container"},[r("h4",[t._v("Comments:")]),t._l(t.task.comments,(function(e){return r("div",{key:e.id,staticClass:"comment-container"},[r("h6",[t._v(t._s(e.user.username))]),r("p",[t._v(t._s(e.content))])])})),r("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"17px"}},[r("b-form-input",{attrs:{size:"sm",placeholder:"Comment."},model:{value:t.comment,callback:function(e){t.comment=e},expression:"comment"}}),r("b-icon-plus-square-fill",{staticStyle:{"margin-left":"8px",cursor:"pointer"},attrs:{variant:"info"},on:{click:t.onComment}})],1)],2),r("b-modal",{attrs:{"hide-header-close":"","hide-footer":"",id:"task-edit-"+t.task.id,centered:"",title:"Task Edit"}},[r("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"Description",required:""},model:{value:t.newDescription,callback:function(e){t.newDescription=e},expression:"newDescription"}}),r("b-button",{staticStyle:{"margin-top":"8px",width:"100%"},attrs:{variant:"info",size:"sm"},on:{click:t.editComment}},[t._v("Save")])],1)],1)},$t=[],jt={name:"TaskOverview",props:{task:Object},data:function(){return{comment:"",newDescription:""}},methods:{openDialog:function(){this.$bvModal.show("task-edit-"+this.task.id)},selectStatus:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},r.prev=1,r.next=4,c.a.put("".concat(e.$apiUrl,"/task/").concat(e.task.id),{status:t},a);case 4:e.$emit("taskUpdated"),e.$bvModal.hide("task-card-"+e.task.id),r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](1),alert("Error updating task");case 11:case"end":return r.stop()}}),r,null,[[1,8]])})))()},onComment:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},a=t.$store.state.userData.id,n=t.task.id,e.prev=3,e.next=6,c.a.post("".concat(t.$apiUrl,"/comment"),{user:{id:a},task:{id:n},content:t.comment},r);case 6:t.$emit("taskUpdated"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),alert("Error commenting task");case 12:t.comment="";case 13:case"end":return e.stop()}}),e,null,[[3,9]])})))()},deleteTask:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},e.prev=1,e.next=4,c.a.delete("".concat(t.$apiUrl,"/task/").concat(t.task.id),r);case 4:t.$bvModal.hide("task-card-"+t.task.id),t.$emit("taskUpdated"),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),alert("Error deleting task");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},editComment:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},t.$bvModal.hide("task-edit-"+t.task.id),e.prev=2,e.next=5,c.a.put("".concat(t.$apiUrl,"/task/").concat(t.task.id),{description:t.newDescription},r);case 5:t.$emit("taskUpdated"),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](2),alert("Error updating task");case 11:t.newDescription="";case 12:case"end":return e.stop()}}),e,null,[[2,8]])})))()}}},_t=jt,Ct=(r("d09a"),Object(m["a"])(_t,St,$t,!1,null,"9d5d7b8c",null)),Rt=Ct.exports,Ot={name:"TaskCard",components:{TaskOverview:Rt},props:{taskInfo:Object},methods:{getBorderVariant:function(){switch(this.taskInfo.status){case"active":return"dark";case"working":return"info";case"done":return"success"}},openDialog:function(){this.$bvModal.show("task-card-"+this.taskInfo.id)},selectStatus:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},r.prev=1,r.next=4,c.a.put("".concat(e.$apiUrl,"/task/").concat(e.taskInfo.id),{status:t},a);case 4:e.$emit("taskUpdated"),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),alert("Error updating task");case 10:case"end":return r.stop()}}),r,null,[[1,7]])})))()}}},Ut=Ot,It=(r("ca0f"),Object(m["a"])(Ut,wt,xt,!1,null,"1b071c89",null)),Et=It.exports,Pt={name:"Column",components:{TaskCard:Et},props:{title:String,tasks:Array},methods:{taskUpdated:function(){this.$emit("taskUpdated")}}},Dt=Pt,At=(r("e287"),Object(m["a"])(Dt,kt,yt,!1,null,"9997e3cc",null)),Tt=At.exports,Ht={name:"Board",components:{Column:Tt},props:{tasks:Array},methods:{taskUpdated:function(){this.$emit("taskUpdated")}}},zt=Ht,Nt=(r("b2cf"),Object(m["a"])(zt,vt,gt,!1,null,"3bb5a9c1",null)),Mt=Nt.exports,Bt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"dashboard-item histories-container"},[r("h3",[t._v("User Histories")]),t._l(t.histories,(function(e){return r("HistoryCard",{key:e.id,attrs:{history:e,selected:t.currentSelectedId===e.id,users:t.users},on:{historySelected:t.historySelected,taskCreated:function(e){return t.$emit("taskCreated")}}})})),r("b-card",[r("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.new-history",modifiers:{"new-history":!0}}],staticStyle:{width:"100%"},attrs:{variant:"outline-info"}},[r("b-icon",{attrs:{icon:"plus","aria-hidden":"true"}})],1)],1),r("b-modal",{attrs:{"hide-footer":"","hide-header-close":"",id:"new-history",centered:"",title:"Register a new history."}},[r("NewHistory",{on:{newHistory:t.createNewHistory}})],1)],2)},qt=[],Lt=(r("4395"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-card",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.$emit("historySelected",t.history.id)}}},[r("b-card-text",[t._v(t._s(t.history.description))]),t.selected?r("b-button",{staticStyle:{width:"100%"},attrs:{variant:"info",size:"sm"},on:{click:t.showTaskDialog}},[t._v(" Add task ")]):t._e()],1),r("b-modal",{attrs:{"hide-footer":"","hide-header-close":"",id:"create-task-"+t.history.id,centered:"",title:"Register a new company."}},[r("b-form",{on:{submit:t.onSubmit}},[r("b-form-group",{attrs:{id:"input-group-1",label:"Description:","label-for":"input-1"}},[r("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"Task description",required:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),r("b-form-group",{attrs:{id:"input-group-2",label:"User:","label-for":"input-2"}},[r("b-form-select",{attrs:{id:"input-2",options:t.users.map((function(t){return t.username+" id:"+t.id})),required:""},model:{value:t.form.user,callback:function(e){t.$set(t.form,"user",e)},expression:"form.user"}})],1),r("div",{staticStyle:{display:"flex","margin-top":"17px"}},[r("b-button",{on:{click:function(e){return t.$bvModal.hide("create-task-"+t.history.id)}}},[t._v("Cancel")]),r("b-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"submit",variant:"primary"}},[t._v(" Submit ")])],1)],1)],1)],1)}),Wt=[],Ft=(r("fe13"),r("d1cf"),r("bdb4"),r("f0cc"),r("da20"),{name:"HistoryCard",props:{history:Object,selected:Boolean,users:Array},data:function(){return{form:{description:"",user:void 0}}},methods:{addTask:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.form.user.match("\\id:[0-9]+").pop(),a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},n={description:t.form.description,user:{id:r.replace("id:","")},history:{id:t.history.id}},e.prev=3,e.next=6,c.a.post("".concat(t.$apiUrl,"/task"),n,a);case 6:t.$emit("taskCreated"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),alert("Error creating task");case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))()},showTaskDialog:function(){this.$bvModal.show("create-task-"+this.history.id)},onSubmit:function(t){t.preventDefault(),this.$bvModal.hide("create-task-"+this.history.id),this.addTask()}}}),Jt=Ft,Vt=Object(m["a"])(Jt,Lt,Wt,!1,null,"44c56794",null),Yt=Vt.exports,Gt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-form",{on:{submit:t.onSubmit}},[r("b-form-group",{attrs:{id:"input-group-1",label:"Description:","label-for":"input-1"}},[r("b-form-input",{attrs:{id:"input-1",type:"text",placeholder:"History description",required:""},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1),r("div",{staticStyle:{display:"flex","margin-top":"17px"}},[r("b-button",{on:{click:function(e){return t.$bvModal.hide("new-history")}}},[t._v("Cancel")]),r("b-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"submit",variant:"primary"}},[t._v("Submit")])],1)],1)},Kt=[],Qt={name:"NewHistory",data:function(){return{form:{description:""}}},methods:{onSubmit:function(t){t.preventDefault(),this.$bvModal.hide("new-history"),this.$emit("newHistory",this.form.description)}}},Xt=Qt,Zt=Object(m["a"])(Xt,Gt,Kt,!1,null,"2f7ba45d",null),te=Zt.exports,ee={name:"HistoriesPanel",components:{NewHistory:te,HistoryCard:Yt},props:{histories:Array,projectId:String,currentSelectedId:Number,users:Array},methods:{historySelected:function(t){this.$emit("historySelected",t)},createNewHistory:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},r.prev=1,r.next=4,c.a.post("".concat(e.$apiUrl,"/history"),{description:t,project:{id:parseInt(e.projectId)}},a);case 4:e.$emit("newProperty"),r.next=10;break;case 7:r.prev=7,r.t0=r["catch"](1),alert("Error creating a new history");case 10:case"end":return r.stop()}}),r,null,[[1,7]])})))()}}},re=ee,ae=(r("406f"),Object(m["a"])(re,Bt,qt,!1,null,"0b0dac25",null)),ne=ae.exports,oe={name:"ProjectDashboard",components:{HistoriesPanel:ne,TasksPanel:Mt},data:function(){return{histories:[],tasks:[],users:[],currentHistoryId:null}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.loadAll();case 2:t.historySelected(t.histories[0].id);case 3:case"end":return e.stop()}}),e)})))()},methods:{loadAll:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("loading"),e.next=3,t.loadUsers();case 3:return e.next=5,t.loadHistories();case 5:t.currentHistoryId&&t.historySelected(t.currentHistoryId);case 6:case"end":return e.stop()}}),e)})))()},loadHistories:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=t.$route.params.projectId,a={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},e.prev=2,e.next=5,c.a.get("".concat(t.$apiUrl,"/history/project/").concat(r),a);case 5:n=e.sent,t.histories=n.data.data,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),alert("Error loading histories and tasks");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()},loadUsers:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r={headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}},e.prev=1,e.next=4,c.a.get("".concat(t.$apiUrl,"/project/").concat(t.$route.params.projectId),r);case 4:return a=e.sent,n=a.data.company.id,e.next=8,c.a.get("".concat(t.$apiUrl,"/user/company/").concat(n),r);case 8:o=e.sent,t.users=o.data,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](1),alert("Error loading company users");case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))()},historySelected:function(t){var e=this.histories.find((function(e){return e.id===t}));this.currentHistoryId=e.id,this.tasks=e.tasks}}},ie=oe,se=(r("552f"),Object(m["a"])(ie,ht,bt,!1,null,null,null)),ce=se.exports,ue=r("5f35");a["default"].use(k["a"]);var le=[{path:"/",name:"Root",component:z},{path:"/companySelect",name:"SelectCompany",component:rt},{path:"/projects/:companyId",name:"SelectProject",component:ft},{path:"/dashboard/:projectId",name:"ProjectDashboard",component:ce}];console.log(ue["publicPath"]);var de=new k["a"]({mode:"history",base:ue["publicPath"],routes:le}),pe=de,me=r("d422"),fe=r("8472");a["default"].config.productionTip=!1,a["default"].use(me["a"]),a["default"].use(fe["a"]),a["default"].prototype.$apiUrl="https://paolo-technical-test.herokuapp.com/api",new a["default"]({router:pe,store:g,render:function(t){return t(h)}}).$mount("#app")},"5dd1":function(t,e,r){"use strict";r("0a59")},"5f35":function(t,e,r){t.exports={publicPath:"/PaoloTechnicalTestFrontend/"}},"7f10":function(t,e,r){},"86d6":function(t,e,r){},9713:function(t,e,r){"use strict";r("dcaf")},"9d3b":function(t,e,r){"use strict";r("2f62")},b2cf:function(t,e,r){"use strict";r("541a")},b3d6:function(t,e,r){"use strict";r("e8b7")},bc9d:function(t,e,r){},ca0f:function(t,e,r){"use strict";r("e6a5")},d09a:function(t,e,r){"use strict";r("3fdc")},dcaf:function(t,e,r){},e287:function(t,e,r){"use strict";r("06d7")},e6a5:function(t,e,r){},e8b7:function(t,e,r){},f0ec:function(t,e,r){"use strict";r("bc9d")}});
//# sourceMappingURL=app.cf5884a4.js.map